(()=>{"use strict";const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.components,l=window.wp.blockEditor,n=window.wp.element,s=window.ReactJSXRuntime,r=e=>e.options.map(((l,n)=>(0,s.jsxs)(t.Flex,{justify:"flex-start",className:"popper-fields-row",children:[(0,s.jsx)(t.FlexItem,{children:(0,s.jsx)(t.Tooltip,{text:(0,o.__)("Mark as selected","popper"),children:(0,s.jsx)(t.CheckboxControl,{checked:l.selected,onChange:o=>e.onChange(o,n,"selected")})})}),e.showValue&&(0,s.jsx)(t.FlexItem,{children:(0,s.jsx)(t.TextControl,{placeholder:(0,o.__)("Value","popper"),value:l.value,onChange:o=>e.onChange(o,n,"value"),__nextHasNoMarginBottom:!0})}),(0,s.jsx)(t.FlexItem,{children:(0,s.jsx)(t.TextControl,{placeholder:(0,o.__)("Label","popper"),value:l.label,onChange:o=>e.onChange(o,n,"label"),__nextHasNoMarginBottom:!0})}),(0,s.jsx)(t.FlexItem,{children:(0,s.jsx)(t.Button,{size:"compact",icon:"no",onClick:()=>e.delete(l,n)})})]},n)));function i(e){const{onRequestClose:l,attributes:i,setAttributes:a}=e,[c,p]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1);return(0,s.jsx)(t.Modal,{title:(0,o.__)("Options","formello"),onRequestClose:l,className:"formello-modal",shouldCloseOnClickOutside:!1,children:(0,s.jsxs)(t.__experimentalVStack,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(t.ToggleControl,{label:(0,o.__)("Bulk add","formello"),checked:c,onChange:e=>p(e)}),c&&(0,s.jsx)(t.TextareaControl,{label:(0,o.__)("Options","formello"),help:(0,o.__)("Enter one option per row separated by comma. Ex.: [US, United States Of America]","formello"),placeholder:(0,o.__)("Insert value and label separated by comma. Ex.: US, United States Of America","formello"),defaultValue:i.options.map((e=>e.value+","+e.label)).join("\r\n"),onChange:e=>(e=>{const o=e.match(/[^\r\n]+/g),t=[];for(const e in o){const l=o[e].split(",");t.push({value:l[0],label:l[1]?l[1]:l[0]})}a({options:t})})(e),rows:"6"}),!c&&(0,s.jsxs)(t.__experimentalVStack,{children:[(0,s.jsx)(t.ToggleControl,{label:(0,o.__)("Show value","formello"),checked:u,onChange:e=>d(e)}),(0,s.jsx)(r,{delete:(e,o)=>{const t=[...i.options];t.splice(o,1),a({options:t})},onChange:(e,o,t)=>{const l=[...i.options],n={...i.options[o]};n[t]=e,l[o]=n,a({options:l})},options:i.options,showValue:u}),(0,s.jsx)("div",{children:(0,s.jsx)(t.Button,{variant:"primary",size:"small",onClick:()=>{a({options:[...i.options,{label:"",value:""}]})},children:"Add option"})})]})]}),(0,s.jsx)(t.__experimentalHStack,{justify:"flex-end",children:(0,s.jsx)(t.Button,{variant:"primary",onClick:l,children:"Save"})})]})})}const a=[{name:"checkboxes",title:(0,o.__)("Multiple choices (Checkboxes)"),description:(0,o.__)("Offer users a list of choices, and allow them to select multiple option.","formello-pro"),icon:"forms",attributes:{type:"checkbox"},scope:["inserter","block","transform"],isDefault:!0},{name:"radios",title:(0,o.__)("Single choice (Radio buttons)"),description:(0,o.__)("Offer users a list of choices, and allow them to select a single option.","formello-pro"),icon:"forms",attributes:{type:"radio"},scope:["inserter","block","transform"]}];a.forEach((e=>{e.isActive=(e,o)=>e.type===o.type}));const c=a,p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"popper/form-multichoices","title":"Multi choices","category":"popper","ancestor":["popper/form"],"textdomain":"popper","attributes":{"name":{"type":"string","default":"my_choice","__experimentalRole":"content"},"type":{"enum":["radio","checkbox"],"default":"checkbox"},"required":{"type":"boolean"},"options":{"type":"array","source":"query","selector":"div.wp-block-popper-form-input","query":{"value":{"type":"string","selector":"input","source":"attribute","attribute":"value"},"label":{"type":"string","selector":"label","source":"html"},"selected":{"type":"boolean","selector":"input","source":"attribute","attribute":"checked"}},"default":[{"value":"1","label":"One"},{"value":"2","label":"Two"},{"value":"3","label":"Three"}]}},"supports":{"anchor":true,"html":false,"color":true,"spacing":true,"inserter":true,"__experimentalBorder":true,"layout":{"allowEditing":false,"allowSwitching":true,"allowInheriting":false,"allowSizingOnChildren":false,"default":{"type":"flex","justifyContent":"stretch","orientation":"vertical","flexWrap":"nowrap"}}},"editorScript":"file:./index.js"}');(0,e.registerBlockType)(p,{variations:c,icon:"forms",edit:function(e){const r=(0,l.useBlockProps)(),[a,c]=(0,n.useState)(!1),{attributes:p,setAttributes:u}=e,{name:d,required:h,options:m,type:x}=p,{children:b,...f}=(0,l.useInnerBlocksProps)(r,{allowedBlocks:!1,templateLock:!1});return(0,s.jsxs)("div",{...f,children:[(0,s.jsxs)(l.InspectorControls,{children:[(0,s.jsx)(l.BlockControls,{children:(0,s.jsx)(t.ToolbarGroup,{children:(0,s.jsx)(t.ToolbarButton,{label:(0,o.__)("Edit options","formello"),icon:"editor-ul",onClick:()=>{c(!0)}})})}),(0,s.jsxs)(t.PanelBody,{title:(0,o.__)("Options","formello"),initialOpen:!0,children:[(0,s.jsx)(t.TextControl,{label:(0,o.__)("Name","formello"),value:d,onChange:e=>u({name:e}),help:(0,o.__)('Affects the "name" attribute of the input element, and is used as a name for the form submission results.',"formello")}),(0,s.jsx)(t.ToggleControl,{label:(0,o.__)("Required","formello"),checked:h,onChange:()=>u({required:!h})}),(0,s.jsx)(t.Button,{variant:"primary",onClick:()=>{c(!0)},children:(0,o.__)("Manage Options","formello")})]})]}),a&&(0,s.jsx)(i,{...e,onRequestClose:()=>{c(!1)}}),m.map(((e,o)=>{const t=d+"-"+o;return(0,s.jsxs)("div",{className:"wp-block-popper-form-input is-label-inline",children:[(0,s.jsx)("label",{htmlFor:t,children:e.label}),(0,s.jsx)("input",{value:e.value||e.label,name:d,type:x,required:h,checked:e.selected,onChange:()=>console.log("change"),id:t})]},o)}))]})},save:function({attributes:e,className:o}){const{name:t,options:n,type:r,required:i}=e,a=l.useBlockProps.save({className:o});return(0,s.jsx)("div",{...a,children:n.map(((e,o)=>{const l=t+"-"+o;return(0,s.jsxs)("div",{className:"wp-block-popper-form-input is-label-inline",children:[(0,s.jsx)("label",{htmlFor:l,children:e.label}),(0,s.jsx)("input",{value:e.value||e.label,name:"checkbox"===r?t+"[]":t,checked:e.selected,type:r,required:i,id:l})]},o)}))})}})})();